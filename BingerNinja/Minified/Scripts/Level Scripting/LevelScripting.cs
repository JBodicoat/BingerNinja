using UnityEngine;using UnityEngine.SceneManagement;using UnityEngine.Tilemaps;public class LevelScripting : M{internal bool enemyDead = false, keyUsed = false, levelBossIntro, bossDead = false, doorsClosed = false, cinematicDone = true, ventDialogueDisabled = false, endVentDialogueCanPlay = false, drawFreezer = false;GameObject a, b, c, d, e, f, g;public GameObject vents;BaseEnemy_SebastianMol h, i, j, k;BossDialogue_MarioFernandes l, m, n;Tilemap o, p, q, r;public Tile bottomDoorTile, topDoorTile;int s = 0, t = 0;public int currentLevel;PlayerController_JamieG u;BossIntroCineScript_AdamG v;Timeline_Script w;float x;WeaponUI_LouieWilliamson y;void Awake(){currentLevel = SceneManager.GetActiveScene().buildIndex;u = F("Player").GetComponent<PlayerController_JamieG>();switch (currentLevel){case 1:{b = F("Key Trigger");p = F("Walls1_Map").GetComponent<Tilemap>();r = F("Walls2_Map").GetComponent<Tilemap>();}break;case 2:{n = F("EndLevelTwo").GetComponent<BossDialogue_MarioFernandes>();j = F("Enemy 1").GetComponent<BaseEnemy_SebastianMol>();k = F("Enemy 2").GetComponent<BaseEnemy_SebastianMol>();a = F("Level 2 Lift");}break;case 3:{h = FT("Enemy").GetComponent<BaseEnemy_SebastianMol>();l = FT("Enemy").GetComponent<BossDialogue_MarioFernandes>();a = F("Level 3 Lift");}break;case 4:{b = F("Key Trigger");p = F("Walls1_map").GetComponent<Tilemap>();o = F("ObjectsInFrontOfWalls_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();}break;case 5:{b = F("Key Trigger");a = F("Level 5 Lift");f = F("Vents");g = F("Exit Vent");}break;case 6:{h = FT("Enemy").GetComponent<BaseEnemy_SebastianMol>();l = FT("Enemy").GetComponent<BossDialogue_MarioFernandes>();a = F("Level 6 Lift");p = F("Walls1_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();}break;case 7:{b = F("Key Trigger");a = F("Level 7 Lift");}break;case 8:{b = F("Key Trigger");c = F("Key Trigger 2");p = F("Walls1_map").GetComponent<Tilemap>();o = F("ObjectsInFrontOfWalls_map").GetComponent<Tilemap>();q = F("ObjectsBehindWalls_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();}break;case 9:{h = FT("Enemy").GetComponent<BaseEnemy_SebastianMol>();l = FT("Enemy").GetComponent<BossDialogue_MarioFernandes>();a = F("Level 9 Lift");}break;case 11:{b = F("Key Trigger");p = F("Walls1_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();}break;case 12:{h = F("Yakuza Leader").GetComponent<BaseEnemy_SebastianMol>();l = F("Yakuza Leader").GetComponent<BossDialogue_MarioFernandes>();a = F("Level 12 Lift");v = F("BossIntroCinematic").GetComponent<BossIntroCineScript_AdamG>();}break;case 13:{b = F("Key Trigger");p = F("Walls1_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();}break;case 14:{a = F("Level 14 Lift");b = F("Real Key");d = F("DialogTrigger");p = F("Walls1_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();bottomDoorTile = p.GetTile<Tile>(new Vector3Int(12, 26, 0));topDoorTile = r.GetTile<Tile>(new Vector3Int(13, 27, 0));}break;case 15:{h = F("Toby the Tiger").GetComponent<BaseEnemy_SebastianMol>();l = F("Toby the Tiger").GetComponent<BossDialogue_MarioFernandes>();a = F("Level 15 Lift");}break;case 17:{a = F("Level 17 Lift");b = F("Key");p = F("Walls1_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();}break;case 18:{h = F("Space Ninja").GetComponent<BaseEnemy_SebastianMol>();l = F("Space Ninja").GetComponent<BossDialogue_MarioFernandes>();a = F("Level 18 Lift");e = F("DialogBox");p = F("Walls1_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();}break;case 19:{a = F("Level 19 Lift");b = F("Key Trigger");p = F("Walls1_map").GetComponent<Tilemap>();r = F("Walls2_map").GetComponent<Tilemap>();}break;case 20:{h = F("Ninjaroth").GetComponent<BaseEnemy_SebastianMol>();i = F("Tadashi").GetComponent<BaseEnemy_SebastianMol>();l = F("Ninjaroth").GetComponent<BossDialogue_MarioFernandes>();m = F("Tadashi").GetComponent<BossDialogue_MarioFernandes>();e = F("DialogBox");a = F("Level 20 Lift");w = F("Cinematics").GetComponent<Timeline_Script>();}break;default:break;}}void Start(){switch (currentLevel){case 2:{a.SetActive(false);}break;case 3:{a.SetActive(false);}break;case 5:{a.SetActive(false);g.SetActive(false);}break;case 6:{a.SetActive(false);}break;case 7:{a.SetActive(false);}break;case 9:{a.SetActive(false);}break;case 12:{a.SetActive(false);}break;case 14:{a.SetActive(false);p.SetTile(new Vector3Int(12, 26, 0), null);p.SetTile(new Vector3Int(12, 25, 0), null);p.SetTile(new Vector3Int(12, 24, 0), null);r.SetTile(new Vector3Int(13, 27, 0), null);r.SetTile(new Vector3Int(13, 26, 0), null);r.SetTile(new Vector3Int(13, 25, 0), null);}break;case 15:{a.SetActive(false);}break;case 18:{h = F("Space Ninja").GetComponent<BaseEnemy_SebastianMol>();l = F("Space Ninja").GetComponent<BossDialogue_MarioFernandes>();a = F("Level 18 Lift");e = F("DialogBox");levelBossIntro = false;a.SetActive(false);}break;case 20:a.SetActive(false);break;default:break;}y = F("WeaponsUI").GetComponent<WeaponUI_LouieWilliamson>();}void Update(){if (u.m_changeLevel.triggered){SceneManager_JamieG.Instance.LoadNextLevel();}switch (currentLevel){case 1:{if(!keyUsed){if (!b.activeInHierarchy){y.setKey(false);r.SetTile(new Vector3Int(6, 13, 0), null);r.SetTile(new Vector3Int(5, 13, 0), null);r.SetTile(new Vector3Int(4, 13, 0), null);p.SetTile(new Vector3Int(3, 12, 0), null);p.SetTile(new Vector3Int(4, 12, 0), null);p.SetTile(new Vector3Int(5, 12, 0), null);keyUsed = true;}}}break;case 2:{if(!enemyDead){if (j.I <= 0 || k.I <= 0){a.SetActive(true);n.TriggerDialogue(0);enemyDead = true;}}}break;case 3:{if(!bossDead){if (!levelBossIntro){l.TriggerDialogue(0);levelBossIntro = true;}if (h.I <= 0){l.TriggerDialogue(1);a.SetActive(true);bossDead = true;}}}break;case 4:{if(!keyUsed){if (!b.activeInHierarchy){y.setKey(false);keyUsed = true;r.SetTile(new Vector3Int(25, 11, 0), null);r.SetTile(new Vector3Int(25, 10, 0), null);r.SetTile(new Vector3Int(25, 9, 0), null);p.SetTile(new Vector3Int(24, 9, 0), null);p.SetTile(new Vector3Int(24, 10, 0), null);p.SetTile(new Vector3Int(24, 8, 0), null);}}}break;case 5:{if(!keyUsed){if (!b.activeInHierarchy){y.setKey(false);keyUsed = true;a.SetActive(true);}}if(!vents.activeInHierarchy && !g.activeInHierarchy){g.SetActive(true);}}break;case 6:{if(!bossDead){if (!levelBossIntro){l.TriggerDialogue(0);levelBossIntro = true;}if (h.I <= 0){l.TriggerDialogue(1);a.SetActive(true);bossDead = true;}}if(!drawFreezer){r.SetTile(new Vector3Int(23, 10, 0), null);r.SetTile(new Vector3Int(23, 9, 0), null);r.SetTile(new Vector3Int(23,8, 0), null);r.SetTile(new Vector3Int(22, 7, 0), null);r.SetTile(new Vector3Int(22, 8, 0), null);r.SetTile(new Vector3Int(22, 9, 0), null);}else if (drawFreezer){r.SetTile(new Vector3Int(23, 10, 0),topDoorTile);r.SetTile(new Vector3Int(23, 9, 0), topDoorTile);r.SetTile(new Vector3Int(23, 8, 0), topDoorTile);r.SetTile(new Vector3Int(22, 7, 0), bottomDoorTile);r.SetTile(new Vector3Int(22, 8, 0), bottomDoorTile);r.SetTile(new Vector3Int(22, 9, 0), bottomDoorTile);}}break;case 7:{if (!b.activeInHierarchy && !keyUsed){a.SetActive(true);keyUsed = true;}}break;case 8:{if(!keyUsed){if (!b.activeInHierarchy){r.SetTile(new Vector3Int(22, 28, 0), null);r.SetTile(new Vector3Int(22, 29, 0), null);r.SetTile(new Vector3Int(22, 27, 0), null);p.SetTile(new Vector3Int(21, 27, 0), null);p.SetTile(new Vector3Int(21, 28, 0), null);p.SetTile(new Vector3Int(21, 26, 0), null);}if (!c.activeInHierarchy){r.SetTile(new Vector3Int(29, 10, 0), null);r.SetTile(new Vector3Int(29, 11, 0), null);r.SetTile(new Vector3Int(29, 9, 0), null);p.SetTile(new Vector3Int(28, 9, 0), null);p.SetTile(new Vector3Int(28, 10, 0), null);p.SetTile(new Vector3Int(28, 8, 0), null);}}}break;case 9:{if(!bossDead){if (!levelBossIntro){l.TriggerDialogue(0);levelBossIntro = true;}if (h.I <= 0){l.TriggerDialogue(1);a.SetActive(true);bossDead = true;}}}break;case 11:{if(!keyUsed){if (!b.activeInHierarchy){y.setKey(false);keyUsed = true;r.SetTile(new Vector3Int(36, 32, 0), null);r.SetTile(new Vector3Int(37, 32, 0), null);r.SetTile(new Vector3Int(38, 32, 0), null);p.SetTile(new Vector3Int(35, 31, 0), null);p.SetTile(new Vector3Int(36, 31, 0), null);p.SetTile(new Vector3Int(37, 31, 0), null);r.SetTile(new Vector3Int(33, 19, 0), null);r.SetTile(new Vector3Int(33, 18, 0), null);r.SetTile(new Vector3Int(33, 17, 0), null);p.SetTile(new Vector3Int(32, 18, 0), null);p.SetTile(new Vector3Int(32, 17, 0), null);p.SetTile(new Vector3Int(32, 16, 0), null);r.SetTile(new Vector3Int(35, 31, 0), null);r.SetTile(new Vector3Int(36, 31, 0), null);r.SetTile(new Vector3Int(37, 31, 0), null);p.SetTile(new Vector3Int(38, 10, 0), null);p.SetTile(new Vector3Int(37, 10, 0), null);p.SetTile(new Vector3Int(36, 10, 0), null);r.SetTile(new Vector3Int(11, 26, 0), null);r.SetTile(new Vector3Int(12, 26, 0), null);r.SetTile(new Vector3Int(13, 26, 0), null);p.SetTile(new Vector3Int(10, 25, 0), null);p.SetTile(new Vector3Int(11, 25, 0), null);p.SetTile(new Vector3Int(12, 25, 0), null);}}}break;case 12:{if(!bossDead){if (!levelBossIntro){l.TriggerDialogue(0);levelBossIntro = true;}if (h.I <= 0){l.TriggerDialogue(1);a.SetActive(true);bossDead = true;}}}break;case 13:{if(!keyUsed){if (!b.activeInHierarchy){y.setKey(false);r.SetTile(new Vector3Int(33, 17, 0), null);r.SetTile(new Vector3Int(34, 17, 0), null);r.SetTile(new Vector3Int(35, 17, 0), null);p.SetTile(new Vector3Int(34, 16, 0), null);p.SetTile(new Vector3Int(33, 16, 0), null);p.SetTile(new Vector3Int(32, 16, 0), null);keyUsed = true;}}}break;case 14:{if (!b.activeInHierarchy){a.SetActive(true);y.setKey(false);}}break;case 15:{if(!bossDead){if (!levelBossIntro){l.TriggerDialogue(0);levelBossIntro = true;}if (h.I <= 0){l.TriggerDialogue(1);a.SetActive(true);bossDead = true;}}}break;case 16:{}break;case 18:{if(!bossDead){if (!levelBossIntro && !e.activeInHierarchy){l.TriggerDialogue(s);s++;if (s == 8){levelBossIntro = true;}}if (h.I <= 0){l.TriggerDialogue(9);a.SetActive(true);bossDead = true;}}}break;case 19:{if (!keyUsed){if (!b.activeInHierarchy){p.SetTile(new Vector3Int(24, 9, 0), null);p.SetTile(new Vector3Int(25, 9, 0), null);p.SetTile(new Vector3Int(23, 9, 0), null);r.SetTile(new Vector3Int(25, 10, 0), null);r.SetTile(new Vector3Int(26, 10, 0), null);r.SetTile(new Vector3Int(24, 10, 0), null);y.setKey(false);keyUsed = true;}}}break;case 20:{if(!bossDead){if (!levelBossIntro && !e.activeInHierarchy){l.TriggerDialogue(s);s++;if (s == 14)levelBossIntro = true;}if (h.I <= 0 && !e.activeInHierarchy){if(w.playableDirector != w.timeline[1])w.ChangeDirector("Bad Ending");l.TriggerDialogue(s);s++;a.SetActive(true);if(s == 19){bossDead = true;}}else if (i != null)if (i.I <= 0 && !e.activeInHierarchy){w.ChangeDirector("Good Ending");m.TriggerDialogue(t);t++;if (t == 8)bossDead = true;a.SetActive(true);}}}break;default:break;}}void OnTriggerEnter2D(Collider2D z){if (currentLevel == 14){if (z.gameObject == d && !doorsClosed){r.SetTile(new Vector3Int(13, 27, 0), topDoorTile);r.SetTile(new Vector3Int(13, 26, 0), topDoorTile);r.SetTile(new Vector3Int(13, 25, 0), topDoorTile);p.SetTile(new Vector3Int(12, 26, 0), bottomDoorTile);p.SetTile(new Vector3Int(12, 25, 0), bottomDoorTile);p.SetTile(new Vector3Int(12, 24, 0), bottomDoorTile);doorsClosed = true;}}}}