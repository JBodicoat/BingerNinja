using UnityEngine;public class PushableObject_JoaoBeijinho : M{protected PlayerController_JamieG m_playerControllerScript;protected PlayerHealthHunger_MarioFernandes m_playerHealthScript;PlayerMovement_MarioFernandes a;EffectManager_MarioFernandes b;Transform c;Collider2D d;string e;GameObject[] f;PushableObject_JoaoBeijinho g;public bool m_canGrab = false;public bool m_isGrabbed = false;void Start(){c = F("Player").transform;m_playerControllerScript = FOT<PlayerController_JamieG>();m_playerHealthScript = FOT<PlayerHealthHunger_MarioFernandes>();d = GetComponent<Collider2D>();a = F("Player").GetComponent<PlayerMovement_MarioFernandes>();transform.gameObject.tag = "Untagged";e = Tags_JoaoBeijinho.m_crateTag;f = GameObject.FindGameObjectsWithTag(e);gameObject.tag = e;}void OnCollisionEnter2D(Collision2D h){if (h.gameObject.CompareTag(Tags_JoaoBeijinho.m_playerTag)){m_canGrab = true;}}void OnCollisionExit2D(Collision2D i){if (i.gameObject.CompareTag(Tags_JoaoBeijinho.m_playerTag)){m_canGrab = false;}}void x(bool j, bool k){m_canGrab = false;m_isGrabbed = true;transform.parent = c;Physics2D.IgnoreCollision(gameObject.transform.parent.GetComponent<Collider2D>(), d);a.m_baseSpeed = 1;a.m_speed = 1;foreach (GameObject crate in f){g = crate.GetComponent<PushableObject_JoaoBeijinho>();if (g.m_isGrabbed){y(true, false);}}}void y(bool l, bool m){a.m_baseSpeed = 3;a.m_speed = 3;m_canGrab = l;m_isGrabbed = m;Physics2D.IgnoreCollision(gameObject.transform.parent.GetComponent<Collider2D>(), d, false);transform.parent = null;}void Update(){if (m_playerControllerScript.m_interact.triggered && m_canGrab){x(false, true);}else if (m_playerControllerScript.m_interact.triggered && m_isGrabbed){y(true, false);}if (m_playerHealthScript.m_healthSlider.value <= 1){y(false, false);}}}