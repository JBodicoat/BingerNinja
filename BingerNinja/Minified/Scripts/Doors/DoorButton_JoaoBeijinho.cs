using UnityEngine;using UnityEngine.Tilemaps;public class DoorButton_JoaoBeijinho : M{protected PlayerController_JamieG m_playerControllerScript;public Collider2D m_doorCollider;public Tile bottomDoor, topDoor;private Tilemap walls1, walls2;public bool m_canPressButton = false;public bool m_doorIsOpen = false;public string buttonName = "";private void OnTriggerEnter2D(Collider2D collision){if (collision.gameObject.CompareTag(Tags_JoaoBeijinho.m_playerTag)){m_canPressButton = true;}else if (collision.gameObject.CompareTag(Tags_JoaoBeijinho.m_projectileTag)){m_doorCollider.GetComponent<Collider2D>().enabled = false;}}private void OnTriggerExit2D(Collider2D collision){if (collision.gameObject.CompareTag(Tags_JoaoBeijinho.m_playerTag)){m_canPressButton = false;}}void Awake(){m_playerControllerScript = FOT<PlayerController_JamieG>();walls1 = F("Walls1_map").GetComponent<Tilemap>();walls2 = F("Walls2_map").GetComponent<Tilemap>();}void Update(){if (m_playerControllerScript.m_interact.triggered && m_canPressButton && buttonName == ""){PlayTrack_Jann.Instance.PlaySound(AudioFiles.Sound_PlayerThrow);if (!m_doorIsOpen){m_doorIsOpen = true;walls2.SetTile(new Vector3Int(24, 9, 0), null);walls2.SetTile(new Vector3Int(24, 10, 0), null);walls2.SetTile(new Vector3Int(24, 11, 0), null);walls1.SetTile(new Vector3Int(23, 8, 0), null);walls1.SetTile(new Vector3Int(23, 9, 0), null);walls1.SetTile(new Vector3Int(23, 10, 0), null);}else {walls2.SetTile(new Vector3Int(24, 9, 0), topDoor);walls2.SetTile(new Vector3Int(24, 10, 0), topDoor);walls2.SetTile(new Vector3Int(24, 11, 0), topDoor);walls1.SetTile(new Vector3Int(23, 8, 0), bottomDoor);walls1.SetTile(new Vector3Int(23, 9, 0), bottomDoor);walls1.SetTile(new Vector3Int(23, 10, 0), bottomDoor);m_doorIsOpen = false;}}if (m_playerControllerScript.m_interact.triggered && m_canPressButton && buttonName == "S11.B1"){if (!m_doorIsOpen){m_doorIsOpen = true;walls2.SetTile(new Vector3Int(12, 20, 0), null);walls2.SetTile(new Vector3Int(13, 20, 0), null);walls2.SetTile(new Vector3Int(14, 20, 0), null);walls1.SetTile(new Vector3Int(13, 19, 0), null);walls1.SetTile(new Vector3Int(12, 19, 0), null);walls1.SetTile(new Vector3Int(11, 19, 0), null);}else {walls2.SetTile(new Vector3Int(12, 20, 0), topDoor);walls2.SetTile(new Vector3Int(13, 20, 0), topDoor);walls2.SetTile(new Vector3Int(14, 20, 0), topDoor);walls1.SetTile(new Vector3Int(13, 19, 0), bottomDoor);walls1.SetTile(new Vector3Int(12, 19, 0), bottomDoor);walls1.SetTile(new Vector3Int(11, 19, 0), bottomDoor);m_doorIsOpen = false;}}if (m_playerControllerScript.m_interact.triggered && m_canPressButton && buttonName == "S11.B2"){if (!m_doorIsOpen){m_doorIsOpen = true;walls2.SetTile(new Vector3Int(20, 20, 0), null);walls2.SetTile(new Vector3Int(19, 20, 0), null);walls2.SetTile(new Vector3Int(18, 20, 0), null);walls1.SetTile(new Vector3Int(19, 19, 0), null);walls1.SetTile(new Vector3Int(18, 19, 0), null);walls1.SetTile(new Vector3Int(17, 19, 0), null);}else {walls2.SetTile(new Vector3Int(20, 20, 0), topDoor);walls2.SetTile(new Vector3Int(19, 20, 0), topDoor);walls2.SetTile(new Vector3Int(18, 20, 0), topDoor);walls1.SetTile(new Vector3Int(19, 19, 0), bottomDoor);walls1.SetTile(new Vector3Int(18, 19, 0), bottomDoor);walls1.SetTile(new Vector3Int(17, 19, 0), bottomDoor);m_doorIsOpen = false;}}if (m_playerControllerScript.m_interact.triggered && m_canPressButton && buttonName == "S11.B3"){if (!m_doorIsOpen){m_doorIsOpen = true;walls2.SetTile(new Vector3Int(26, 20, 0), null);walls2.SetTile(new Vector3Int(25, 20, 0), null);walls2.SetTile(new Vector3Int(24, 20, 0), null);walls1.SetTile(new Vector3Int(25, 19, 0), null);walls1.SetTile(new Vector3Int(24, 19, 0), null);walls1.SetTile(new Vector3Int(23, 19, 0), null);}else {walls2.SetTile(new Vector3Int(26, 20, 0), topDoor);walls2.SetTile(new Vector3Int(25, 20, 0), topDoor);walls2.SetTile(new Vector3Int(24, 20, 0), topDoor);walls1.SetTile(new Vector3Int(25, 19, 0), bottomDoor);walls1.SetTile(new Vector3Int(24, 19, 0), bottomDoor);walls1.SetTile(new Vector3Int(23, 19, 0), bottomDoor);m_doorIsOpen = false;}}}}